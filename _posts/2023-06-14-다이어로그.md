---
layout: post
title: "dialog íƒœê·¸ ì‚¬ìš©í•˜ê¸°"
author: sera
categories: [expand]
tags: [css, html]
image: assets/images/thum-exp.jpg
---

2022ë…„ í•˜ë°˜ê¸°ë¶€í„° ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ `dialog`ë¥¼ ì§€ì›í•˜ê²Œ ë˜ì—ˆë‹¤.
dialogëŠ” jsë¥¼ í†µí•´ ì¡°ì‘í•´ì•¼ í•˜ë©° ì•„ë˜ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œë¥¼ ìƒì†í•œë‹¤.

- open() : booleanìœ¼ë¡œ ì‚¬ìš© ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ„
- returnValue() : ë°˜í™˜ê°’ì„ ì„¤ì •/ë°˜í™˜í•˜ëŠ” ë¬¸ìì—´
- close() : ì„ íƒì  ë¬¸ìì—´ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ì—¬ returnValueë¥¼ ì—…ë°ì´íŠ¸ í•¨
- show() : ëŒ€í™” ìƒì ëª¨ë¸ì„ ë¶ˆí•„ìš”í•˜ê²Œ í‘œì‹œ, ëŒ€í™”ìƒì ë°–ì˜ ë‚´ìš©ê³¼ ìƒí˜¸ì‘ìš©ì„ ê³„ì† í—ˆìš©í•¨
- showModal() : ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ëŒ€í™” ìƒì ìœ„ì— ëŒ€í™” ìƒìë¥¼ ëª¨ë‹¬ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ëŒ€í™” ì™¸ë¶€ì˜ ëª¨ë“  ê²ƒì€ ëŒ€í™” ì™¸ë¶€ì˜ ìƒí˜¸ ì‘ìš©ì´ ì°¨ë‹¨ë˜ì–´ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.

<style>
section{max-width:300px;margin:0 auto;border:1px solid #ccc; padding:1rem;} 

:modal {border:none;padding: 0;}
:modal form {display: grid;grid-template-rows: auto 1fr auto;}
:modal form>*{box-sizing: border-box;padding:0.5em;}

:modal .header {display: flex;}
:modal .header>.tit {flex:1;}
:modal .body {min-height:150px;}
:modal .bottom {display: flex; justify-content: end;}

:modal button {appearance:none; border:none; background-color: transparent;font-weight: bold;}
:modal #negative.default {color: red;}
:modal #postive.default {color: #2264ff;}
</style>
<section>
  <h3>ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ëŒ€í™”ì°½ì´ ë‚˜ì˜µë‹ˆë‹¤.</h3>
  <button id="btnOpen" aria-haspopup="dialog">ë²„íŠ¼ ğŸ˜‹</button>
  <p>ê²°ê³¼ ê°’ : <span id="message" aria-live="assertive"></span></p>
</section>

<dialog id="myDialog" aria-labelledby="wyn_title" aria-describedby="wyn_desc">
  <form method="dialog">
    <div class="header">
      <strong id="wyn_title" class="tit">ì„ í˜¸í•˜ëŠ” ìƒ‰ ì¡°ì‚¬</strong
      ><button id="btnClose" aria-label="close" value="cancel">X</button>
    </div>
    <div class="body">
      <p id="wyn_desc">ì•ˆë…•? ğŸ˜‹ ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µì„ í•´ì¤˜.</p>
      <div>
        <label for="typeName">
          ì¢‹ì•„í•˜ëŠ” ìƒ‰ì´ ë­ì•¼?
          <input type="text" name="typeName" id="typeName" autofocus />.
        </label>
      </div>
    </div>
    <div class="bottom">
      <button id="negative" name="negative" type="submit" value="negative">
        ë‚˜ì¤‘ì—
      </button>
      <button
        class="default"
        name="postive"
        type="submit"
        id="postive"
        value="postive"
      >
        í™•ì¸
      </button>
    </div>
  </form>
</dialog>

<script>
const dialog = document.querySelector("dialog#myDialog");
const message = document.querySelector("#message");

const [btnOpen, btnClose, typeName] = [document.querySelector("#btnOpen"),
document.querySelector("#btnClose"),
document.querySelector("#typeName")];

btnOpen.addEventListener("click", () => dialog.showModal());
btnClose.addEventListener("click", () => dialog.close());

typeName.addEventListener("keydown", (evt) => {
if(evt.code === "Enter") {
console.log("0t0");
evt.preventDefault();
dialog.querySelector(".default").click();
}
});

dialog.addEventListener("close", () => {
switch (dialog.returnValue) {
case "cancel":
return false;
case "negative":
message.innerHTML = "ì™œì¥¬? ì§€ê¸ˆ ë‹µí•´ìš”";
break;
case "postive":
dialog.returnValue = typeName.value;
if (dialog.returnValue) {
message.innerHTML = `ë‚œ, ${dialog.returnValue} ì¢‹ì•„íš¨â¤`;
} else {
message.innerHTML = "ë¹„ì–´ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.";
}
break;
}
});
</script>

```css
section {
  max-width: 300px;
  margin: 0 auto;
  border: 1px solid #ccc;
  padding: 1rem;
}

:modal {
  /*:modalì€ ëª¨ë‹¬ ìƒíƒœì˜ ëŒ€í™”ìƒì ë°•ìŠ¤ì— ëŒ€í•œ ì„ íƒìì´ë‹¤. ë¹„ëª¨ë‹¬ ëŒ€í™”ìƒìëŠ” dialog íƒœê·¸ ì„ íƒìë¡œ ì •ì˜ê°€ ê°€ëŠ¥í•˜ë‹¤. */
  border: none;
  padding: 0;
}
:modal form {
  /* ëª¨ë‹¬ ì•ˆì— ìˆëŠ” ì„œì‹ ì»¨í…Œì´ë„ˆë¥¼ gridë¡œ ë§Œë“¤ê²ë‹ˆë‹¤. 3ê°œì˜ í–‰ì„ ê°€ì§€ë©°, ê° í–‰ì€, header, body, bottom ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.*/
  display: grid;
  grid-template-rows: auto 1fr auto;
}
:modal form > * {
  /* ì„œì‹ ì»¨í…Œì´ë„ˆ ë°”ë¡œ ì•„ë˜ì— ìˆì„ ê° rowì— padding ì—¬ë°±ì„ ì£¼ì–´ì„œ ë³´ê¸° ì‹œì›í•œ ë””ìì¸ì„ ë§Œë“­ë‹ˆë‹¤. */
  box-sizing: border-box;
  padding: 0.5em;
}

:modal .header {
  /* headerì—ëŠ” displayë¥¼ flexë¡œ ì£¼ê³ , ì•ˆì— ìˆëŠ” ëª¨ë“  ë‚´ìš©ì´ ì˜†ìœ¼ë¡œ ë‹¬ë¼ë¶™ë„ë¡ í•©ë‹ˆë‹¤. */
  display: flex;
}
:modal .header > .tit {
  flex: 1; /*class="tit"ì€ íƒ€ì´í‹€ í…ìŠ¤íŠ¸ ìš”ì†Œì…ë‹ˆë‹¤. flex:1;ì„ ì£¼ë©´, ì´ ìš”ì†Œê°€ ì£¼ë³€ ìš”ì†Œê°€ ìˆëŠ” ìë¦¬ë¥¼ ì¹¨ë²”í•˜ì§€ ì•Šê³  .headerì˜ ëŒ€ë¶€ë¶„ì„ ì°¨ì§€í•©ë‹ˆë‹¤. */
}
:modal .body {
  min-height: 150px; /* ìµœì†Œ ì„¸ë¡œ ë„“ì´ë¥¼ 150í”½ì…€ë¡œ ì¤˜ì„œ ë„ˆë¬´ ì‘ì€ ëŒ€í™”ìƒìê°€ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤. */
}
:modal .bottom {
  display: flex;
  justify-content: end; /* bottom ì˜ì—­ ì—­ì‹œ display:flex;ë¥¼ ì¤˜ì„œ ê°€ë¡œë¡œ ì •ë ¬ë˜ê²Œ í•©ë‹ˆë‹¤. bottomì—ëŠ” ëŒ€í™”ìƒì ë‚´ì— ìˆëŠ” ë²„íŠ¼ì„ ë„£ì„ê²ë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì— ë²„íŠ¼ì´ ë‚˜íƒ€ë‚˜ê¸¸ ì›í•˜ë‹ˆ, justify-contentë¥¼ endë¡œ ì¤ë‹ˆë‹¤.*/
}

:modal button {
  /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ì„ ë¬´ë ¥í™”í•©ë‹ˆë‹¤. */
  appearance: none;
  border: none;
  background-color: transparent;
  font-weight: bold;
}
:modal #negative.default {
  /* ë¶€ì •ì ì¸ ë‹µë³€ì— ëŒ€í•œ ë²„íŠ¼ì´ .defaultì´ë©´ ë¶€ì •ë‹µë³€ ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ë¥¼ ë¹¨ê°•ìƒ‰ìœ¼ë¡œ í‘œì‹œ */
  color: red;
}
:modal #postive.default {
  /* ê¸ì •ì ì¸ ë‹µë³€ì— ëŒ€í•œ ë²„íŠ¼ì´ .defaultë©´ ê¸ì • ë‹µë³€ ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ë¥¼ íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œ*/
  color: #2264ff;
}
```

```html
<section>
  <h3>ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ëŒ€í™”ì°½ì´ ë‚˜ì˜µë‹ˆë‹¤.</h3>
  <button id="btnOpen" aria-haspopup="dialog">ë²„íŠ¼ ğŸ˜‹</button>
  <p>ê²°ê³¼ ê°’ : <span id="message" aria-live="assertive"></span></p>
</section>

<dialog id="myDialog" aria-labelledby="wyn_title" aria-describedby="wyn_desc">
  <!--ëŒ€í™”ìƒìë¥¼ ë§Œë“­ë‹ˆë‹¤. ëŒ€í™”ìƒìì— ìŠ¤í¬ë¦°ë¦¬ë”ê°€ ì ‘ê·¼í•˜ë©´, ëŒ€í™”ìƒì íƒ€ì´í‹€ê³¼ ë©”ì‹œì§€ë¥¼ ì•ˆë‚´í•˜ë„ë¡ aria-labelledbyì™€ describedbyë¥¼ í™œìš©í•´ ì¤ë‹ˆë‹¤.-->
  <form method="dialog">
    <!--formì˜ ìƒˆë¡œìš´ method, dialogê°’ì€ ëŒ€í™”ìƒì ë‚´ì—ì„œ formì´ ì „ì†¡ë˜ì—ˆì„ ë•Œì— ëŒ€í•œ ë™ì‘ì„ ì–˜ê¸°í•©ë‹ˆë‹¤.-->
    <div class="header">
      <strong id="wyn_title" class="tit">ì„ í˜¸í•˜ëŠ” ìƒ‰ ì¡°ì‚¬</strong
      ><button id="btnClose" aria-label="close" value="cancel">X</button>
    </div>
    <!--ì œëª© í‘œì‹œì¤„ê³¼ ë‹«ê¸° ë²„íŠ¼ì…ë‹ˆë‹¤.-->
    <div class="body">
      <!--ëŒ€í™”ìƒì ë‚´ë¶€ì— í‘œì‹œë  ì§ˆë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤.-->
      <p id="wyn_desc">ì•ˆë…•? ğŸ˜‹ ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µì„ í•´ì¤˜.</p>
      <div>
        <label for="typeName">
          ì¢‹ì•„í•˜ëŠ” ìƒ‰ì´ ë­ì•¼?
          <input type="text" name="typeName" id="typeName" autofocus />.
        </label>
      </div>
    </div>
    <div class="bottom">
      <button id="negative" name="negative" type="submit" value="negative">
        ë‚˜ì¤‘ì—
      </button>
      <button
        class="default"
        name="postive"
        type="submit"
        id="postive"
        value="postive"
      >
        í™•ì¸
      </button>
    </div>
  </form>
</dialog>
```

```js
const dialog = document.querySelector("dialog#myDialog");
const message = document.querySelector("#message");

const [btnOpen, btnClose, typeName] = [
  document.querySelector("#btnOpen"),
  document.querySelector("#btnClose"),
  document.querySelector("#typeName"),
];

// HTMLDialogElement.show()ë¡œ ì—´ë©´ ë¹„ëª¨ë‹¬ ëŒ€í™”ìƒì, HTMLDialogElement.showModal()ë¡œ ì—´ë©´ ëª¨ë‹¬ ëŒ€í™”ìƒìê°€ ì—´ë¦¼. show()í•¨ìˆ˜ì— showModal() ë©”ì†Œë“œê°€ ì‚¬ìš©ë¨
btnOpen.addEventListener("click", () => dialog.showModal());

// X ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹«ìœ¼ë©´
btnClose.addEventListener("click", () => dialog.close());

// í¸ì§‘ì°½ ê°’ ë°”ë€” ë•Œ ê¸ì • ë²„íŠ¼ì˜ value ì†ì„±ì„ ë°”ê¿”ì„œ ë°˜í™˜ì‹œí‚¨ë‹¤.
typeName.addEventListener("keydown", (evt) => {
  if (evt.code === "Enter") {
    // evt.codeì˜ ë°˜í™˜ê°’ì´ "Enter" ìŠ¤íŠ¸ë§ì´ë©´,
    evt.preventDefault(); //preventDefaultë¡œ ê¸°ë³¸ í‚¤ ë™ì‘ì„ ë¬´ì‹œ
    dialog.querySelector(".default").click(); // Enterê°€ ëˆŒë¦¬ë©´ dialogì˜ ê¸°ë³¸ ì‘ë‹µ ë™ì‘ì„ ë¬´ì‹œí•˜ê³ , default í´ë˜ìŠ¤ê°€ ë¶€ì—¬ëœ ë²„íŠ¼ì´ ëˆŒë¦¬ë„ë¡í•¨.
  }
});

// dialogê°€ ë‹«í˜”ì„ ë•Œì— ëŒ€í•œ Event
dialog.addEventListener("close", () => {
  switch (dialog.returnValue) {
    case "cancel":
      return false;
    case "negative":
      message.innerHTML = "ì™œì¥¬? ì§€ê¸ˆ ë‹µí•´ìš”";
      break;
    case "postive":
      dialog.returnValue = typeName.value;
      if (dialog.returnValue) {
        message.innerHTML = `ë‚œ, ${dialog.returnValue} ì¢‹ì•„íš¨â¤`;
      } else {
        message.innerHTML = "ë¹„ì–´ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.";
      }
      break;
  }
});
```

ì°¸ê³ ìë£Œ
[mdn](https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/returnValue)
[NULI](https://nuli.navercorp.com/community/article/1133173)
